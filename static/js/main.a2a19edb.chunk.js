(this.webpackJsonpstatx=this.webpackJsonpstatx||[]).push([[0],{122:function(e,t,a){},192:function(e,t,a){e.exports=a(388)},275:function(e,t,a){},376:function(e,t,a){},378:function(e,t,a){},386:function(e,t,a){},387:function(e,t,a){},388:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"setStat",(function(){return F})),a.d(n,"addStat",(function(){return G})),a.d(n,"login",(function(){return R})),a.d(n,"filter",(function(){return M})),a.d(n,"openAddForm",(function(){return P})),a.d(n,"closeAddForm",(function(){return I})),a.d(n,"load",(function(){return U})),a.d(n,"loadComp",(function(){return B})),a.d(n,"getStat",(function(){return J})),a.d(n,"fetchStats",(function(){return z})),a.d(n,"newFetchStats",(function(){return W})),a.d(n,"FetchLogIn",(function(){return Y})),a.d(n,"FetchRegData",(function(){return K})),a.d(n,"getCat",(function(){return V})),a.d(n,"getCatalog",(function(){return $})),a.d(n,"getCatFull",(function(){return q})),a.d(n,"getCatalogFull",(function(){return H}));var r=a(2),c=a.n(r),o=a(37),l=a.n(o),s=a(43),u=a(18),i=a(154),m=a(162),d=a(38),p=a.n(d),b=a(3),f={isLoading:!1,form:{open:!1}},g=Object(u.c)({statistic:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"GET_STAT":return p()(n,"date","asc");case"ADD_STAT":return[].concat(Object(m.a)(e),[n]);default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{auth:!1,profile:{}},t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"LOGIN":return console.log("work"),{auth:!0,profile:n};case"LOGOUT":return{auth:!1,profile:{}};default:return e}},appdata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"LOADING":case"LOADING_COMPLEATE":return Object(b.a)(Object(b.a)({},e),{},{isLoading:n});case"OPEN_ADD_FORM":return Object(b.a)(Object(b.a)({},e),{},{form:{open:!0}});case"CLOSE_ADD_FORM":return Object(b.a)(Object(b.a)({},e),{},{form:{open:!1}});default:return e}},stat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{month:[],all:[]},t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"GET_CATALOG":return console.log("norm"),Object(b.a)(Object(b.a)({},e),{},{month:p()(n,"date","asc")});case"GET_CATALOG_FULL":return console.log(Object(b.a)(Object(b.a)({},e),{},{all:n})),Object(b.a)(Object(b.a)({},e),{},{all:n});case"SUM_USD":return Object(b.a)(Object(b.a)({},e),{},{sumUSD:n});case"SUM_BYN":return Object(b.a)(Object(b.a)({},e),{},{sumBYN:n});case"AVERAGE_PRORATE":return Object(b.a)(Object(b.a)({},e),{},{averageProrate:n});default:return e}}}),h=Object(u.d)(g,Object(u.a)(i.a)),E=a(11),O=(a(275),a(30)),v=a(44);a(122);var y=function(e){var t,a=e.actions,n=Object(r.useState)({login:"",password:"",bank:""}),o=Object(O.a)(n,2),l=o[0],s=o[1],u=function(e){switch(e.target.name){case"login":s(Object(b.a)(Object(b.a)({},l),{},{login:e.target.value}));break;case"password":s(Object(b.a)(Object(b.a)({},l),{},{password:e.target.value}));break;case"email":console.log(e.target),s(Object(b.a)(Object(b.a)({},l),{},{email:e.target.value}));break;case"bank":s(Object(b.a)(Object(b.a)({},l),{},{bank:e.target.value}));break;case"repeatpassword":l.password==e.target.value?s(Object(b.a)(Object(b.a)({},l),{},{passwordtrue:!0})):s(Object(b.a)(Object(b.a)({},l),{},{passwordtrue:!1}))}};return c.a.createElement("div",{className:"signin_form"},"Login",c.a.createElement("input",{type:"text",name:"login",onChange:u}),c.a.createElement("label",{htmlFor:"password"},"Password"),c.a.createElement("input",{type:"password",name:"password",onChange:u}),c.a.createElement("div",null,"Repeat password",c.a.createElement("input",{className:"secondpass "+(t=l.passwordtrue,t?"good":"wrong"),type:"password",name:"repeatpassword",onBlur:u})," ",function(e){return e?c.a.createElement(v.a,{className:"good"}):c.a.createElement(v.b,{className:"wrong"})}(l.passwordtrue)),"Email",c.a.createElement("input",{type:"email",name:"email",onChange:u}),"Your bank",c.a.createElement("input",{type:"text",name:"bank",onChange:u}),c.a.createElement("button",{className:"button",onClick:function(){return a.regAction(l)}},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))};var j=function(e){var t=e.actions,a=Object(r.useState)({login:"",password:"",bank:""}),n=Object(O.a)(a,2),o=n[0],l=n[1],s=function(e){switch(e.target.name){case"login":l(Object(b.a)(Object(b.a)({},o),{},{login:e.target.value}));break;case"password":l(Object(b.a)(Object(b.a)({},o),{},{password:e.target.value}))}};return c.a.createElement("div",{className:"signin_form"},"Login",c.a.createElement("input",{type:"text",name:"login",onChange:s}),c.a.createElement("label",{htmlFor:"password"},"Password"),c.a.createElement("input",{type:"password",name:"password",onChange:s}),c.a.createElement("button",{className:"button",onClick:function(){return t.loginAction(o)}},"\u0432\u043e\u0439\u0442\u0438"))},A=a(19),N=a(13);a(375),a(376);function k(e){var t=e.checked;console.log(t);var a=Object(r.useState)(!1),n=Object(O.a)(a,2);n[0],n[1];return c.a.createElement("div",{className:"checkbox"},t?c.a.createElement(N.b,{name:"check",className:"checkbox checked"}):c.a.createElement(N.a,{className:"checkbox default"}))}var w=function(e,t,a){var n=Object(r.useState)({date:{},prorate:0,buy:!1,usd:0,byn:0,helper:{status:null,text:null}}),o=Object(O.a)(n,2),l=o[0],s=o[1],u=function(t){switch(console.log(l.prorate>e.lastRate),t.target.name){case"prorate":a>l.prorate?s(Object(b.a)(Object(b.a)({},l.helper),{},{helper:{status:"bad",text:"bad day to buy USD"}})):s(Object(b.a)(Object(b.a)({},l.helper),{},{helper:{status:"good",text:"good day to buy USD"}})),s(Object(b.a)(Object(b.a)({},l),{},{prorate:parseFloat(t.target.value),increase:t.target.value>=e.lastRate}));break;case"rate":s(Object(b.a)(Object(b.a)({},l),{},{rate:parseFloat(t.target.value)}));break;case"check":s(Object(b.a)(Object(b.a)({},l),{},{buy:!l.buy,usd:0,byn:0}));break;case"usd":s(Object(b.a)(Object(b.a)({},l),{},{usd:parseInt(t.target.value),byn:Math.trunc(100*t.target.value*l.prorate)/100}))}};return c.a.createElement("div",{className:"blur"},c.a.createElement("div",{className:"form"},c.a.createElement(N.l,{className:"close_button",onClick:e.close}),c.a.createElement("input",{type:"number",name:"prorate",placeholder:"prorate",onChange:u,onClick:function(e){var t=new Date;console.log(t),s(Object(b.a)(Object(b.a)({},l),{},{date:{default:t.toDateString(),full:t.getTime(),month:t.toLocaleString("ru-ru",{month:"long"})}}))}}),c.a.createElement("input",{type:"number",name:"rate",placeholder:"rate",onChange:u}),c.a.createElement("div",{className:l.helper.status+" help"},l.helper.text),c.a.createElement("div",{name:"check",onClick:function(){s(Object(b.a)(Object(b.a)({},l),{},{buy:!l.buy,usd:0,byn:0}))}},"\u041a\u0443\u043f\u043b\u0435\u043d\u043d\u043e? ",c.a.createElement(k,{checked:l.buy})),c.a.createElement("input",{type:"number",name:"usd",disabled:!l.buy,onChange:u}),c.a.createElement("button",{onClick:function(){return e.addStat(l,e.user.login)}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))},x=a(10);var C=function(e){var t=e.filterAction,a=e.catAction,n=e.login,r=Object(x.g)();return c.a.createElement("div",{className:"filter"},c.a.createElement(E.b,{to:"".concat(r.pathname),className:"button",onClick:function(){t({other:"",login:n}),a(n)}},"\u0412\u0441\u0435"),c.a.createElement(E.b,{to:"".concat(r.pathname,"?filter=week"),className:"button",onClick:function(){t({other:"?filter=week",login:n}),a(n+"?filter=week")}},"\u041d\u0435\u0434\u0435\u043b\u044f"),c.a.createElement(E.b,{to:"".concat(r.pathname,"?filter=month"),className:"button",onClick:function(){t({other:"?filter=month",login:n}),a(n+"?filter=month")}},"   \u041c\u0435\u0441\u044f\u0446"),c.a.createElement(E.b,{to:"".concat(r.pathname,"?filter=3month"),className:"button",onClick:function(){t({other:"?filter=3month",login:n}),a(n+"?filter=3month")}},"3 \u041c\u0435\u0441\u044f\u0446\u0430"),c.a.createElement(E.b,{to:"".concat(r.pathname,"?filter=halfyear"),className:"button",onClick:function(){return t({other:"?filter=halfyear",login:n})}},"6 \u041c\u0435\u0441\u044f\u0446\u0435\u0432"))},S=a(31);var L=function(e){var t=e.data,a={usd:0,byn:0,price:0,srusd:0};return t.map((function(e,n){!0===e.buy&&(a.usd=a.usd+e.usd,a.byn=a.byn+e.byn,a.price=a.usd*t[t.length-1].prorate,a.srusd=a.usd/t.length)})),c.a.createElement("div",{className:"table"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"column"},"\u041a\u0443\u043f\u043b\u0435\u043d\u043d\u043e ",c.a.createElement(S.a,null),a.usd," --- ",a.byn," --- ",a.price," --- ",a.srusd)),t.map((function(e,t){return c.a.createElement("div",{className:"row",key:t},c.a.createElement("div",{className:"column"},t+1,")"),c.a.createElement("div",{className:"column date"},e.date.default),c.a.createElement("div",{className:"column"},e.increase?c.a.createElement(S.d,{color:"#f44336",size:"20px"}):c.a.createElement(S.c,{color:"#4CAF50",size:"20px"})),c.a.createElement("div",{className:"column"},e.prorate),e.buy?c.a.createElement("div",{className:"column not-buy"},c.a.createElement(N.i,{color:"inherit",size:"20px"})):c.a.createElement("div",{className:"column buy"},c.a.createElement(N.j,{color:"inherit",size:"20px"})),e.buy?c.a.createElement("div",{className:"column"},c.a.createElement(S.a,null)," ",e.usd):c.a.createElement("div",{className:"column"},c.a.createElement(S.b,{color:"#f44336"})),c.a.createElement("div",{className:"column byn"},e.buy?e.byn:c.a.createElement(S.b,{color:"#f44336"})))})))};var T=function(e){var t=e.props,a=Object(x.g)();Object(r.useEffect)((function(){t.getStat({login:t.user.profile.login,other:a.search}),t.getCatFull(t.user.profile.login)}),[t.isLoading]);var n=t.statistic.length>0?t.statistic[t.statistic.length-1]:{prorate:0};return console.log(t),c.a.createElement("div",{className:"App"},!0===t.appdata.isLoading?c.a.createElement("div",{className:"loading"},c.a.createElement(N.g,null)):null,c.a.createElement(C,{filterAction:t.getStat,catAction:t.getCatFull,login:t.user.profile.login,status:t.appdata.filter}),c.a.createElement(A.d,{width:document.documentElement.clientWidth-50,height:600,data:t.statistic,margin:{top:5,right:30,left:20,bottom:5}},c.a.createElement(A.a,{strokeDasharray:"4 4"}),c.a.createElement(A.g,{dataKey:"date.default"}),c.a.createElement(A.h,{domain:["dataMin","dataMax + 0.01"]}),c.a.createElement(A.f,null),c.a.createElement(A.b,null),c.a.createElement(A.e,{x:"Wed Sep 02 2020",stroke:"red",label:"Max PV PAGE"}),c.a.createElement(A.e,{y:t.stat.all.averageRate,label:"Rate "+t.stat.all.averageRate,stroke:"grey"}),c.a.createElement(A.c,{type:"monotone",dataKey:"rate",stroke:"#4caf50",activeDot:{r:3},dot:{r:.5}}),c.a.createElement(A.c,{type:"monotone",dataKey:"prorate",stroke:"#f03226",activeDot:{r:3},dot:{r:1}})),t.appdata.form.open?c.a.createElement(w,{addStat:t.fetchStats,close:t.closeAddForm,user:t.user.profile,lastRate:n.prorate}):c.a.createElement("button",{className:"add trans",onClick:t.openAddForm},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),c.a.createElement(L,{data:t.statistic}))};a(378);var D=function(e){var t=e.status,a=e.user,n=Object(x.g)();return console.log(n),t?c.a.createElement("div",{className:"menu"},c.a.createElement(E.b,{to:"/Astatx/".concat(a,"/")},c.a.createElement(N.d,null)),c.a.createElement(E.b,{to:"/Astatx/".concat(a,"/list")},c.a.createElement(N.f,null)),c.a.createElement(E.b,{to:"/Astatx/".concat(a,"/catalog")},c.a.createElement(N.c,null)),c.a.createElement(E.b,{to:"/Astatx/".concat(a,"/profile")},c.a.createElement(N.k,null))):c.a.createElement("div",{className:"menu"},c.a.createElement("div",null,c.a.createElement(E.b,{to:"/Astatx/login"},c.a.createElement(N.h,null),"Log in")),c.a.createElement("div",null,c.a.createElement(E.b,{to:"/Astatx/signin"},c.a.createElement(N.e,null),"Sign up")))},_=(a(96),a(379),a(382),"http://localhost:5000"),F=function(e){return{type:"GET_STAT",payload:e}},G=function(e){return{type:"ADD_STAT",payload:e}},R=function(e){return{type:"LOGIN",payload:e}},M=function(e){return{type:"FILTER",payload:e}},P=function(){return{type:"OPEN_ADD_FORM"}},I=function(){return{type:"CLOSE_ADD_FORM"}},U=function(){return{type:"LOADING",payload:!0}},B=function(){return{type:"LOADING_COMPLEATE",payload:!1}},J=function(e){return function(t){console.log(e),fetch(_+"/Astatx/statistic/"+e.login+e.other).then((function(a){return console.log(a),t(M(e.other)),a.json()})).then((function(e){t(F(e)),t(B())}))}},z=function(e,t){return function(a){fetch(_+"/Astatx/"+t+"/addelement",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log(e),a(G(e)),console.log("\u0437\u0430\u043a\u0440\u044b\u0432\u0430\u0435\u043c"),a(I())}))}},W=function(e,t){return function(a){fetch(_+"/nstat/"+t,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log(e),a(G(e))}))}},Y=function(e){return function(t){fetch(_+"/Astatx/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return console.log(e),e.json()})).then((function(e){console.log(e),void 0===e.error?t(R(e)):t(function(e){return{type:"LOADING_FAIL",payload:e}}(e))}))}},K=function(e){return function(t){fetch(_+"/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log(e),t(Y(e))}))}},V=function(e){return function(t){console.log(e),fetch(_+"/catalog/"+e).then((function(e){return console.log(e),e.json()})).then((function(e){t($(e))}))}},$=function(e){return{type:"GET_CATALOG",payload:e}},q=function(e){return function(t){fetch(_+"/catalog/alltime/"+e).then((function(e){return e.json()})).then((function(e){t(H(e))}))}},H=function(e){return{type:"GET_CATALOG_FULL",payload:e}};a(386);function Q(e){var t=e.data;return c.a.createElement("div",{className:"catalog_box"},c.a.createElement("div",{className:"catalog_month"},t.dateName||"\u0412\u0441\u0451 \u0432\u0440\u0435\u043c\u044f"),c.a.createElement("div",null,"\u041a\u0443\u043f\u043b\u0435\u043d\u043d\u043e \u0434\u043e\u043b\u043b\u0430\u0440\u043e\u0432: ",t.sumUSD),c.a.createElement("div",null,"\u041f\u043e\u0442\u0440\u0430\u0447\u0435\u043d\u043d\u043e \u0440\u0443\u0431\u043b\u0435\u0439: ",t.sumBYN),c.a.createElement("div",null,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u043a\u0443\u0440\u0441 : ",t.maxRate),c.a.createElement("div",null,"\u0421\u0440\u0435\u0434\u043d\u0438\u0439 \u043a\u0443\u0440\u0441 : ",t.averageRate),c.a.createElement("div",null,"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u043a\u0443\u0440\u0441 : ",t.minRate))}var X=Object(s.b)((function(e){return{alldata:e.statistic,user:e.user.profile.login,month:e.stat.month,all:e.stat.all}}),(function(e){return Object(b.a)({},Object(u.b)(n,e))}))((function(e){var t=e.getCat,a=e.user,n=e.getCatFull,o=e.month,l=e.all;return Object(x.g)(),Object(r.useEffect)((function(){console.log(o),t(a),n(a)}),[]),c.a.createElement("div",{className:"Catalog"},c.a.createElement("div",{className:"MonthCatalog"},o.map((function(e){return c.a.createElement(Q,{key:e.date,data:e})}))),c.a.createElement("div",{className:"AllCatalog"},c.a.createElement(Q,{data:l})))}));a(387);var Z=Object(s.b)((function(e){return Object(b.a)(Object(b.a)({},e),{},{statistic:(t=e.statistic,p()(t,"date.full","asc"))});var t}),(function(e){return Object(b.a)({},Object(u.b)(n,e))}))((function(e){var t=Object(x.h)(),a=Object(x.g)();return console.log(a,t),c.a.createElement("div",{className:"app"},c.a.createElement("div",{className:"content"},c.a.createElement(x.d,null,c.a.createElement(x.b,{exact:!0,path:"/Astatx"},!1===e.user.auth?c.a.createElement(x.a,{to:"/Astatx/login"}):c.a.createElement(T,{props:e})),c.a.createElement(x.b,{exact:!0,path:"/Astatx/login"},!0===e.user.auth?c.a.createElement(x.a,{to:"/Astatx/".concat(e.user.profile.login)}):c.a.createElement(j,{actions:{loginAction:e.FetchLogIn}})),c.a.createElement(x.b,{exact:!0,path:"/Astatx/signin"},!0===e.user.auth?c.a.createElement(x.a,{to:"/Astatx/".concat(e.user.profile.login)}):c.a.createElement(y,{actions:{regAction:e.FetchRegData}})),c.a.createElement(x.b,{exact:!0,path:"/Astatx/:login"},e.user.profile.login===t.login?c.a.createElement(x.a,{to:"/Astatx/login"}):c.a.createElement(T,{props:e})),c.a.createElement(x.b,{exact:!0,path:"/Astatx/:login/catalog"},!1===e.user.auth?c.a.createElement(x.a,{to:"/Astatx/login"}):c.a.createElement(X,null)),c.a.createElement(x.b,{path:"*"},c.a.createElement("div",null,"not found")))),c.a.createElement(D,{status:e.user.auth,user:e.user.profile.login}))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(s.a,{store:h},c.a.createElement(E.a,null,c.a.createElement(Z,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[192,1,2]]]);
//# sourceMappingURL=main.a2a19edb.chunk.js.map